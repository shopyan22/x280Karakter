<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pembatas 280 Karakter + Emoji & Acak Kata</title>
  <style>
    body { font-family: Arial, sans-serif; background: #0f172a; color: #e5e7eb; margin: 0; padding: 20px; }
    h1 { font-size: 1.5rem; }
    textarea { width: 100%; min-height: 120px; padding: 10px; border-radius: 8px; border: 1px solid #444;
               background: #111827; color: #fff; resize: vertical; outline: none; }
    textarea:focus { border-color: #22d3ee; }
    .info { margin-top: 8px; font-size: 0.9rem; color: #94a3b8; }
    .counter { font-weight: bold; }
    .controls { margin-top: 12px; display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
    button { padding: 8px 14px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
    .btn-main { background: #22d3ee; color: #0f172a; }
    .btn-alt { background: #1f2937; color: #e5e7eb; border: 1px solid #374151; }
    .status { margin-top: 10px; font-size: 0.9rem; }
    .ok { color: #34d399; }
    .danger { color: #f43f5e; }
    h2 { margin-top: 30px; }
  </style>
</head>
<body>
  <h1>Pembatas 280 Karakter + Emoji Otomatis</h1>
  <!-- === BAGIAN EMOJI === -->
  <textarea id="inputEmoji" placeholder="Tulis teks untuk versi emoji..."></textarea>
  <div class="info">
    Karakter: <span class="counter" id="charCountEmoji">0</span> / 280
  </div>
  <div class="controls">
    <label>
      <input type="checkbox" id="toggleEmoji" /> Tambahkan emoji acak (awal & akhir baris)
    </label>
  </div>
  <div class="controls">
    <button class="btn-main" id="copyBtnEmoji">Salin Hasil</button>
    <button class="btn-alt" id="clearBtnEmoji">Bersihkan</button>
  </div>
  <div class="status" id="statusMsgEmoji"></div>
  <h2>Hasil Emoji</h2>
  <textarea id="outputEmoji" readonly></textarea>

  <!-- === BAGIAN ACAK KATA === -->
  <h1>Acak Kata (Dipisah Koma)</h1>
  <textarea id="inputShuffle" placeholder="Tulis teks untuk diacak..."></textarea>
  <div class="controls">
    <button class="btn-main" id="copyBtnShuffle">Salin Hasil</button>
    <button class="btn-alt" id="clearBtnShuffle">Bersihkan</button>
  </div>
  <div class="status" id="statusMsgShuffle"></div>
  <h2>Hasil Acak Kata</h2>
  <textarea id="outputShuffle" readonly></textarea>

  <script>
  const MAX_CHARS = 280;

  // === DATA EMOJI ===
  const EMOJIS = ['ðŸ˜Ž','ðŸ¤©','ðŸ¥³','ðŸ˜‰','ðŸ˜Š','ðŸ¤—','ðŸ”¥','âœ¨','ðŸŒŸ','ðŸ’«','âš¡','ðŸ’¥','ðŸŒˆ','â„ï¸','â˜€ï¸','ðŸŒ™','ðŸ‘','ðŸ‘','ðŸ™Œ','ðŸ’ª','ðŸ«¶','ðŸ¤','âœ…','â­','ðŸ†','ðŸ“ˆ','ðŸ’¡','ðŸ§ ','ðŸ› ï¸','ðŸ§©','ðŸŽ¯','ðŸ—ï¸','ðŸš€','â³','ðŸ“Œ','ðŸ€','ðŸŒ±','ðŸŒ¿','ðŸŒ¸','ðŸŒ»','ðŸŒŠ','ðŸŽ‰','ðŸŽ','ðŸ’Ž'];

  function randomEmoji() {
    return EMOJIS[Math.floor(Math.random() * EMOJIS.length)];
  }

  // === FUNGSI SHUFFLE ARRAY ===
  function shuffleArray(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  // === UTIL: COPY DARI TEXTAREA (Clipboard API + Fallback) ===
  function copyFromTextarea(textareaEl, statusEl, successMsg) {
    const text = textareaEl.value || '';
    if (!text) {
      statusEl.textContent = 'Tidak ada teks untuk disalin.';
      statusEl.className = 'status danger';
      return;
    }

    // Pakai Clipboard API jika secure context
    if (navigator.clipboard && window.isSecureContext) {
      navigator.clipboard.writeText(text).then(() => {
        statusEl.textContent = successMsg;
        statusEl.className = 'status ok';
      }).catch(() => {
        fallback();
      });
    } else {
      fallback();
    }

    function fallback() {
      // Buat textarea sementara agar readonly tidak jadi masalah
      const temp = document.createElement('textarea');
      temp.value = text;
      temp.setAttribute('readonly', '');
      temp.style.position = 'fixed';
      temp.style.top = '-1000px';
      document.body.appendChild(temp);
      temp.focus();
      temp.select();

      let ok = false;
      try { ok = document.execCommand('copy'); } catch (e) { ok = false; }
      document.body.removeChild(temp);

      if (ok) {
        statusEl.textContent = successMsg;
        statusEl.className = 'status ok';
      } else {
        statusEl.textContent = 'âŒ Gagal menyalin.';
        statusEl.className = 'status danger';
      }
    }
  }

  // ==========================
  // ====== BAGIAN EMOJI ======
  // ==========================
  const inputEmoji = document.getElementById('inputEmoji');
  const outputEmoji = document.getElementById('outputEmoji');
  const charCountEmoji = document.getElementById('charCountEmoji');
  const statusMsgEmoji = document.getElementById('statusMsgEmoji');
  const toggleEmoji = document.getElementById('toggleEmoji');
  const copyBtnEmoji = document.getElementById('copyBtnEmoji');
  const clearBtnEmoji = document.getElementById('clearBtnEmoji');

  function processEmoji() {
    let raw = inputEmoji.value || '';
    if (raw.length > MAX_CHARS) raw = raw.slice(0, MAX_CHARS);

    let result = raw;
    if (toggleEmoji.checked) {
      const lines = raw.split(/\r?\n/);
      result = lines.map(line => {
        if (!line.trim()) return '';
        return `${randomEmoji()} ${line.trim()} ${randomEmoji()}`;
      }).join('\n');
    }

    outputEmoji.value = result;
    charCountEmoji.textContent = raw.length;
    statusMsgEmoji.textContent = raw.length >= MAX_CHARS ? 'âš ï¸ Dipangkas ke 280 karakter.' : 'Siap dipakai âœ“';
    statusMsgEmoji.className = raw.length >= MAX_CHARS ? 'status danger' : 'status ok';
  }

  inputEmoji.addEventListener('input', processEmoji);
  toggleEmoji.addEventListener('change', processEmoji);

  copyBtnEmoji.addEventListener('click', () => {
    copyFromTextarea(outputEmoji, statusMsgEmoji, 'âœ… Hasil berhasil disalin!');
  });

  clearBtnEmoji.addEventListener('click', () => {
    inputEmoji.value = '';
    outputEmoji.value = '';
    processEmoji();
  });

  processEmoji();

  // ==========================
  // ====== ACAK KATA =========
  // ==========================
  const inputShuffle = document.getElementById('inputShuffle');
  const outputShuffle = document.getElementById('outputShuffle');
  const statusMsgShuffle = document.getElementById('statusMsgShuffle');
  const copyBtnShuffle = document.getElementById('copyBtnShuffle');
  const clearBtnShuffle = document.getElementById('clearBtnShuffle');

  function processShuffle() {
    const raw = inputShuffle.value || '';
    const words = raw.split(/\s+/).filter(Boolean);
    const shuffled = shuffleArray(words);
    // Pisah KOMA SATU: "A, B, C" (tanpa koma terakhir)
    outputShuffle.value = shuffled.join(' ');
    statusMsgShuffle.textContent = words.length > 0 ? 'âœ… Kata berhasil diacak!' : 'Masukkan teks terlebih dahulu.';
    statusMsgShuffle.className = words.length > 0 ? 'status ok' : 'status danger';
  }

  inputShuffle.addEventListener('input', processShuffle);

  copyBtnShuffle.addEventListener('click', () => {
    copyFromTextarea(outputShuffle, statusMsgShuffle, 'âœ… Hasil acak kata berhasil disalin!');
  });

  clearBtnShuffle.addEventListener('click', () => {
    inputShuffle.value = '';
    outputShuffle.value = '';
    statusMsgShuffle.textContent = '';
  });
</script>

</body>
</html>
